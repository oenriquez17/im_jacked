<!doctype html>

<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Workout Entry</title>

    <link href="/css/bootstrap.css" rel="stylesheet" type="text/css">
    <script src="/jquery/jquery.js"></script>

</head>

<body>
    <%- include('navbar') %>

    <br>

    <div id="workout-entry-form" class="container">
        <div class="error">
            <% if (locals.error) { %>
                <div class="alert alert-danger" role="alert">
                    <%= error %>
                </div>
            <% } %>
        </div>

        <form action="add_edit_workoutentry" method="post">
            <div class="form-group">
                <label for="workout-date">Workout Date</label>
                <input class="form-control" type="date" name="workoutdate" id="workout-date" required>
            </div>
            <div class="form-group">
                <label for="exercise">Exercise</label>
                <select class="form-control" id="exercise" name="exercise" required></select>
            </div>
            <div class="form-group">
                <label for="reps">Reps</label>
                <input class="form-control" autocomplete="off" type="number" id="reps" name="reps" placeholder="Enter the number of reps per set performed" required>
            </div>
            <div class="form-group">
                <label for="weight">Weight</label>
                <div class="input-group">
                    <input type="number" id="weight" autocomplete="off" class="form-control" name="weight" placeholder="Enter weight" required>
                    <div class="input-group-append">
                        <span class="input-group-text" id="basic-addon2">Lbs</span>
                    </div>
                </div>
            </div>

            <br>

            <button class="btn btn-dark float-right" type="submit">Submit</button>
        </form>
    </div>

    <script type="text/javascript">
        //set date field to current date
        var now = new Date();

        var day = ("0" + now.getDate()).slice(-2);
        var month = ("0" + (now.getMonth() + 1)).slice(-2);

        var today = now.getFullYear() + "-" + (month) + "-" + (day);

        $('#workout-date').val(today);

        //populate exercise dropdown with available values
        let dropdown = $('#exercise');

        dropdown.empty();

        dropdown.append('<option disabled selected value>Choose exercise</option>');

        var available_exercises = JSON.parse('<%- JSON.stringify(exercises) %>');
        $.each(available_exercises, function(i, exercise) {
            var id = available_exercises[i].id;
            var name = available_exercises[i].name;
            dropdown.append($('<option></option>').attr('value', id).text(name));
        });

    </script>
    <script src="/js/bootstrap.js" type="text/javascript"></script>

</body>

</html>
